<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.29.xsd">

    <changeSet id="008-fix-user-password" author="system">
        <comment>Fix default user password - set correct BCrypt hash for Opticals@2026</comment>
        
        <!-- BCrypt hash generated for password: Opticals@2026 -->
        <sql>
            UPDATE users 
            SET password = '$2a$12$Lp7wB/9zJqeqUaXYRDB2MOro2350Wt6a3ipUdp5xjaIpZFMvCSrKy',
                failed_login_attempts = 0,
                account_non_locked = true
            WHERE username = 'rockgymuser';
        </sql>

        <rollback>
            <sql>
                UPDATE users 
                SET password = '$2a$12$LQv3c1yqBWVHxkd0LHAkCOem06OsmVp72uIXe/RQGZP9.wcMQqmOa'
                WHERE username = 'rockgymuser';
            </sql>
        </rollback>
    </changeSet>

</databaseChangeLog>
